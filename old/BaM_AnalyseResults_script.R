#------------------------------------------------------------------
# TUNINGS
#------------------------------------------------------------------
Rfolder="C:\\BEN\\FORGE\\BaM\\trunk\\R"
workspace="C:\\BEN\\FORGE\\BaM\\trunk\\core\\tests\\BaM_BaRatin"
file.X='Limni_days.txt'
file.env='Qt_TotalU.env'
file.spag='Qt_Maxpost.spag'
#------------------------------------------------------------------

#------------------------------------------------------------------
# Preliminaries
#------------------------------------------------------------------
setwd(workspace)
source(paste(Rfolder,"\\BaMplots.R",sep=''))
model=ReadModel()
#------------------------------------------------------------------

#------------------------------------------------------------------
# MCMC
#------------------------------------------------------------------
g=MCMCplot(doLogPost=F,doDPar=T)
X11();print(g)
g=MCMCplot(doLogPost=F,doDPar=T,type='density',prior=model$par)
X11();print(g)
#------------------------------------------------------------------

#------------------------------------------------------------------
# Residual analysis
#------------------------------------------------------------------
g=Residualplot(nX=model$nX,nY=model$nY)
for(i in 1:length(g)){
  if(!is.null(g[[i]])){X11();print(g[[i]])}
}
#------------------------------------------------------------------

#------------------------------------------------------------------
# Plot predictions
#------------------------------------------------------------------
env=EnvelopLayer(file=file.env,Xfile=file.X)
spag=SpaghettiLayer(file=file.spag,Xfile=file.X)
X11();print(ggplot()+env+spag)
#------------------------------------------------------------------

